<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planos | SmartPlanos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Função para calcular a renda diária e total
    function calcularRenda(valorInicial) {
      const rentabilidade = 0.11; // 11%
      const dias = 75; // Período de 75 dias
      const rendaTotal = valorInicial * (1 + rentabilidade); // Renda total após 75 dias
      const rendaDiaria = (rendaTotal - valorInicial) / dias; // Renda diária

      return {
        rendaTotal: rendaTotal.toFixed(2),
        rendaDiaria: rendaDiaria.toFixed(2)
      };
    }

    // Função para atualizar as informações de cada plano
    function atualizarPlanos() {
      // Definir os valores iniciais dos planos
      const planos = [5000, 10000, 20000, 50000, 100000, 500000, 1000000];
      const nomePlanos = ['VIP1', 'VIP2', 'VIP3', 'VIP4', 'VIP5', 'VIP6', 'VIP7'];

      planos.forEach((valorInicial, index) => {
        const { rendaTotal, rendaDiaria } = calcularRenda(valorInicial);

        // Atualizar os dados no HTML
        document.getElementById(`rendaDiaria${nomePlanos[index]}`).innerText = `R$ ${rendaDiaria}`;
        document.getElementById(`rendaTotal${nomePlanos[index]}`).innerText = `R$ ${rendaTotal}`;
        document.getElementById(`preco${nomePlanos[index]}`).innerText = `R$ ${valorInicial}`;
        document.getElementById(`assinar${nomePlanos[index]}`).setAttribute('href', `https://meusite.com/checkout/${nomePlanos[index].toLowerCase()}`);
      });
    }

    // Chamar a função para atualizar os planos ao carregar a página
    window.onload = atualizarPlanos;
  </script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Header -->
  <header class="bg-black text-white py-5 shadow-md">
    <div class="max-w-6xl mx-auto px-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold">SmartPlanos</h1>
      <nav class="space-x-6 text-sm hidden md:block">
        <a href="home.html" class="hover:underline">Início</a>
        <a href="investir.html" class="hover:underline font-semibold text-blue-400">Planos</a>
        <a href="perfil.html" class="hover:underline">Perfil</a>
        <a href="tarefas.html" class="hover:underline">Tarefas</a>
      </nav>
    </div>
  </header>

  
    
  </section>

  <!-- Planos -->
  <section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4 grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">

      <!-- Plano VIP1 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://images.unsplash.com/photo-1596687760372-4c0d266059a7?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fG1vdG98ZW58MHx8MHx8fDA%3D" alt="Plano VIP1" class="rounded-md mb-4 w-full h-28 object-cover">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP1">VIP1 - Kz 5.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP1">Kz 550.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP1">Kz 41250.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP1">Kz 5.000</p>
        <a href="vip1.html" id="assinarVIP1" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP2 -->
      <div class="bg-white border-2 border-blue-700 rounded-xl shadow-md p-4 text-center">
        <img src="https://images.unsplash.com/photo-1591637333184-19aa84b3e01f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8bW90b3xlbnwwfHwwfHx8MA%3D%3D" alt="Plano VIP2" class="rounded-md mb-4 w-full h-28 object-cover">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP2">VIP2 - Kz 10.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP2">Kz 1100.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP2">Kz 82,500.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP2">Kz 10.000</p>
        <a href="vip2.html" id="assinarVIP2" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP3 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://images.unsplash.com/photo-1588627541420-fce3f661b779?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fG1vdG98ZW58MHx8MHx8fDA%3D" alt="Plano VIP3" class="rounded-md mb-4 w-full h-28 object-cover">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP3">VIP3 - Kz 30.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP3">Kz 3,300.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP3">Kz 247,500.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP3">Kz 30.000</p>
        <a href="vip3.html" id="assinarVIP3" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP4 -->
      <div class="bg-white border-2 border-blue-700 rounded-xl shadow-md p-4 text-center">
        <img src="https://plus.unsplash.com/premium_photo-1661884049104-9d79c968a64c?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTN8fG1vdG98ZW58MHx8MHx8fDA%3D">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP4">VIP4 - Kz 70.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP4">Kz 7,700.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP4">Kz 577,500.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP4">Kz 70.000</p>
        <a href="vip4.html" id="assinarVIP4" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP5 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://media.istockphoto.com/id/518198839/pt/foto/piloto-de-acidente.webp?a=1&b=1&s=612x612&w=0&k=20&c=BLZW_b-dmYNNlDeZMZewkcL3fxQ74apH5bJzs4oIIdg=">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP5">VIP5 - Kz 100.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP5">Kz 11,000.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP5">Kz 825,000.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP5">Kz 100.000</p>
        <a href="vip5.html" id="assinarVIP5" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP6 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://media.istockphoto.com/id/912151500/pt/foto/overturned-motorcycle-after-collision.webp?a=1&b=1&s=612x612&w=0&k=20&c=4IyrA1vQIWkKiSVoaJFHFgXfby3L_F_tf5QLcib59j0=">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP5">VIP6 - Kz 130,000.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP5">Kz 14,300.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP5">Kz 1,072,500.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP6">Kz 130.000</p>
        <a href="vip6.html" id="assinarVIP5" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      <!-- Plano VIP7 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://media.istockphoto.com/id/1457093031/pt/foto/motorcycle-parked-on-the-road.webp?a=1&b=1&s=612x612&w=0&k=20&c=9U7-UxCiMgeP0SXP0d02sy-XdB5kh38GbIiR4G8euhU=">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP5">VIP5 - Kz 200.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP5">Kz 22,000.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP5">Kz 1,650,000.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP7">Kz 200.000</p>
        <a href="vip7.html" id="assinarVIP5" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

      
        <!-- Plano VIP8 -->
      <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">
        <img src="https://media.istockphoto.com/id/1457596651/pt/foto/traveling-on-a-motorcycle-on-the-roads.webp?a=1&b=1&s=612x612&w=0&k=20&c=_r839san-OBmNhztTgPi5f9895qThZBAy5M8Lma8aeo=">
        <h3 class="text-lg font-semibold" id="nomePlanoVIP5">VIP8 - Kz 500.000</h3>
        <p class="text-sm text-gray-500">Renda Diária: <span id="rendaDiariaVIP5">Kz 55,000.00</span></p>
        <p class="text-sm text-gray-500">Renda Total (75 dias): <span id="rendaTotalVIP5">Kz 4,125,000.00</span></p>
        <p class="text-blue-700 text-xl font-bold my-3" id="precoVIP5">Kz 500.000</p>
        <a href="vip8.html" id="assinarVIP5" class="bg-blue-800 text-white text-sm px-4 py-2 rounded-full hover:bg-blue-700 transition">Assinar</a>
      </div>

 <!-- Plano VIP5 -->
 <div class="bg-gray-100 rounded-xl shadow-sm hover:shadow-lg transition p-4 text-center">



    </div>
  </section>

  <!-- Footer fixo estilo app -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 shadow-inner z-50 md:hidden">
    <div class="flex justify-around items-center py-2 text-gray-600">
      <a href="home.html" class="flex flex-col items-center text-sm hover:text-blue-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M3 9l9-6 9 6v10.5A1.5 1.5 0 0 1 19.5 21h-15A1.5 1.5 0 0 1 3 19.5V9z" />
        </svg>
        Início
      </a>
      <a href="investir.html" class="flex flex-col items-center text-sm text-blue-600 font-semibold">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8v1m0 7v1m-9-5a9 9 0 1 1 18 0 9 9 0 0 1-18 0z" />
        </svg>
        Planos
      </a>
      <a href="perfil.html" class="flex flex-col items-center text-sm hover:text-blue-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M15.75 6.75a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0zM4.5 20.25a8.25 8.25 0 0 1 15 0" />
        </svg>
        Perfil
      </a>
      <a href="tarefas.html" class="flex flex-col items-center text-sm hover:text-blue-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M3 5h18M3 12h18M3 19h18" />
        </svg>
        Equipe
      </a>
    </div>
  </nav>
  <script>
    // Função para atualizar os dados do usuário na interface
    function atualizarDadosUsuario() {
        let user = JSON.parse(localStorage.getItem('user_data'));
        if (user) {
            document.getElementById('telefoneUsuario').textContent = user.telefone || 'Não disponível';
            document.getElementById('saldoUsuario').textContent = `KZ ${user.saldo ? user.saldo.toFixed(2) : '0.00'}`;
        } else {
            window.location.href = 'login.html'; // Se o usuário não estiver logado, redireciona para login
        }
    }

    // Função para realizar a compra e descontar o saldo
    function realizarCompra(planoId, precoProduto) {
        let user = JSON.parse(localStorage.getItem('user_data'));

        if (user) {
            if (user.saldo >= precoProduto) {
                // Desconta o saldo do usuário
                user.saldo -= precoProduto;

                // Atualiza o saldo no localStorage
                localStorage.setItem('user_data', JSON.stringify(user));

                // Chama a função para atualizar a interface com os dados mais recentes
                atualizarDadosUsuario();

                // Prepara os dados para salvar no produto
                const dadosCompra = {
                    id_usuario: user.id,
                    nome_usuario: user.nome,
                    renda_usuario: user.renda,
                    preco_produto: precoProduto,
                    nome_plano: planoId
                };

                // Envia a requisição para salvar os dados na API
                fetch('https://meuappi.onrender.com/compras', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dadosCompra),
                })
                .then(response => response.json())
                .then(data => {
                    alert('Compra realizada com sucesso!');
                })
                .catch(error => {
                    console.error('Erro ao realizar a compra:', error);
                });
            } else {
                alert('Saldo insuficiente para realizar a compra.');
            }
        } else {
            alert('Usuário não encontrado.');
        }
    }

    // Atualiza os planos com seus respectivos links para assinatura
    function atualizarPlanos() {
        const planos = [
            { id: 'VIP1', valor: 5000 },
            { id: 'VIP2', valor: 10000 },
            { id: 'VIP3', valor: 20000 },
            { id: 'VIP4', valor: 50000 },
            { id: 'VIP5', valor: 100000 }
        ];

        planos.forEach((plano) => {
            document.getElementById(`assinar${plano.id}`).addEventListener('click', (event) => {
                event.preventDefault();
                realizarCompra(plano.id, plano.valor);
            });
        });
    }

    // Quando a página for carregada, atualiza os dados do usuário e planos
    window.onload = function() {
        atualizarDadosUsuario();
        atualizarPlanos();
    };
</script>
